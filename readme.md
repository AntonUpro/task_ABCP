### Тестовое задание для разработчика на PHP
Мы ожидаем, что Вы:
* найдете и исправите все возможные ошибки (синтаксические, проектирования, безопасности и т.д.);
* отрефакторите код файла `ReturnOperation.php` в лучший по вашему мнению вид;
* напишите в комментарии краткое резюме по коду: назначение кода и его качество.

Назначение кода:
Функция doOperation класса ReturnOperation обрабатывает приходящий на сервер запрос. 
Тип запроса и путь, по которому делается запрос не известны. 
Происходит валидация входящих данных.
Достаются сущности reseller, client, creator, expert из storage, проверяется их существование.
Отправляется уведомление о добавлении новой позиции, либо об изменении их статуса. 
При добавлении новой позиции отправляется уведомление только сотрудникам продавца. 
Почты для отправки берутся из настроек. 
При смене статуса, при наличии почты у клиента, уведомление отправляется на почту.
Так же при наличии номера телефона клиента, отправляется уведомление на номер телефона.
Итогом возвращается ответ, со статусом проделанных действий. Были ли отправление письма и СМС сотрудникам и клиенту.

Качество кода:

Допущены фатальные ошибки:
* использование переменных без их объявления:
* указание типа возвращаемого значение void, когда функция возвращает array
* передача аргументов в разном порядке в одну и ту же функцию
* использование self вместо static

Не предусмотрена обработка возможных ошибок:
* обращение к элементам массива по ключам, без проверки наличия этого ключа в массиве
* нет обработки исключений при вызове сторонней функции

Признаки плохого кода: 
* сокращение названия переменных, не логичное название переменных
* не указаны типы данных свойств классов
* использование публичных свойств классов (использовать геттеры и сеттеры)
* не указаны типы принимаемых аргументов и возвращаемых значений в методах/функциях
* название файла должно соответствовать названию класса по PSR
* один файл - один класс
* использование функций без классов
* использование общего Exception(в дальнейшем сложно обрабатывать такое)
* обобщение проверок в один Exception
* лишние условия и проверки не несущие смысла 
* многократное получение переменной из массива, 2 и более раз. Можно объявить переменную и использовать в дальнейшем ее.
* не указан какой запрос обрабатывает функция и в каком виде приходят данные data
* вся логика в одной функции
* нет документирования методов
* и т.д.

Возможные варианты улучшения кода:
* формировать объекта с данными пришедшими в запросе [ReturnRequest.php](Request%2FReturnRequest.php), 
использовать отдельный класс для валидации и построения объекта [ReturnRequestBuilder.php](RequestBuilder%2FReturnRequestBuilder.php)
* все строковые значения параметров запроса и ответа вынести в константы. Пример 
```php
public const REQUEST_DATE = 'date';
public const RESPONSE_NOTIFICATION_EMPLOYEE_BY_EMAIL = 'notificationEmployeeByEmail';
```
Использовать их при обращении к элементам массива.
* использование сторонней библиотеки для валидации параметров входящего запроса. Плюсы: быстрее и удобнее писать валидации. 
Минусы: обычно работают медленно, используют много ресурсов, плюс лишняя зависимость для проекта. 